---
import Layout from '../layouts/Layout.astro';
import { getCollection } from 'astro:content';

const pieces = (await getCollection('art')).sort((a, b) => {
	const ay = a.data.year ?? 0;
	const by = b.data.year ?? 0;
	return by - ay;
});
---

<Layout title="Art | C4bbage64" description="Pixel art and visual experiments by C4bbage64">
	<section class="mx-auto max-w-6xl px-6 py-14 lg:py-20">
		<div class="flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between">
			<div>
				<p class="text-sm uppercase tracking-[0.2em] text-slate-500 dark:text-slate-400">Art</p>
				<h1 class="text-3xl font-semibold leading-tight sm:text-4xl">Pixel Art & Visuals</h1>
				<p class="mt-3 max-w-2xl text-slate-600 dark:text-slate-300">
					A small gallery of pixel pieces and visual experiments. Swap the placeholders with your own work
					and tweak the metadata in <code>src/content/art</code>.
				</p>
			</div>
			<a class="btn-secondary" href="/contact">Say hi</a>
		</div>

		<div class="mt-10 grid gap-6 sm:grid-cols-2 lg:grid-cols-3">
			{pieces.map((piece) => (
				<a class="card group flex h-full flex-col overflow-hidden" href={`/art/${piece.slug}/`}>
					<div class="relative aspect-[4/3] bg-slate-900/80">
						{piece.data.image && (
							<img
								src={piece.data.image}
								alt={piece.data.title}
								loading="lazy"
								class="h-full w-full object-contain object-center transition group-hover:scale-[1.03]"
							/>
						)}
						{!piece.data.image && (
							<div class="flex h-full w-full items-center justify-center text-xs text-slate-400">
								Add image path in frontmatter
							</div>
						)}
					</div>
					<div class="flex flex-1 flex-col gap-2 p-4">
						<div class="flex items-center justify-between gap-2">
							<h2 class="truncate text-lg font-semibold group-hover:text-slate-900 dark:group-hover:text-white">
								{piece.data.title}
							</h2>
							{piece.data.year && (
								<span class="pill text-[11px]">{piece.data.year}</span>
							)}
						</div>
						<div class="flex flex-wrap gap-1.5 text-[11px] text-slate-500 dark:text-slate-400">
							{piece.data.tools?.map((tool) => (
								<span class="pill border-none bg-slate-100/80 px-2 py-0.5 text-[11px] text-slate-700 dark:bg-slate-800/80 dark:text-slate-200">
									{tool}
								</span>
							))}
						</div>
						<div class="mt-auto flex flex-wrap gap-1.5 pt-1 text-[11px] text-slate-500 dark:text-slate-400">
							{piece.data.tags?.map((tag) => (
								<span class="pill border-none bg-slate-100/80 px-2 py-0.5 text-[11px] text-slate-700 dark:bg-slate-800/80 dark:text-slate-200">
									{tag}
								</span>
							))}
						</div>
					</div>
				</a>
			))}
		</div>
	</section>
</Layout>
